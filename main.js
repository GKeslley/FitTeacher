(()=>{"use strict";function e(e,t,n){const i=document.documentElement,s="data-outside";function o(a){e.contains(a.target)||(e.removeAttribute(s),t.forEach((e=>{i.removeEventListener(e,o)})),n())}e.hasAttribute(s)||(t.forEach((e=>{setTimeout((()=>{i.addEventListener(e,o)}))})),e.setAttribute(s,""))}const t=new class{constructor(e,t,n,i){this.modalContainer=document.querySelector(e),this.btnCloseModal=document.querySelector(t),this.name=document.getElementById(n),this.modal=document.querySelector(i)}closeModal(){this.modalContainer.classList.add("ativo"),e(this.modal,["click","touchstart"],(()=>{this.modalContainer.classList.remove("ativo"),window.location.reload()}))}addEventModal(){this.btnCloseModal.addEventListener("click",(()=>{this.modalContainer.classList.remove("ativo"),window.location.reload()})),this.closeModal()}init(){return this.btnCloseModal&&this.modalContainer&&this.name.value&&this.addEventModal(),this}}('[data-modal="container"]','[data-modal="fechar"]',"name",".modal");let n="",i="";function s(e,t){let n;return(...i)=>{n&&clearTimeout(n),n=setTimeout((()=>{e(...i),n=null}),t)}}class o{constructor(e,t){this.elementsMove=document.querySelectorAll(e),this.containerElements=document.querySelectorAll(t),this.dragOfX=.5*window.innerWidth,this.dragOfY=.5*window.innerHeight,this.alunoAtivo="alunoAtivo"}initMove(e){this.containerElements.forEach((e=>{window.matchMedia("(min-width: 900px)").matches&&e.classList.contains(this.alunoAtivo)&&addEventListener("mousedown",this.addEventMove)}))}addEventMove(){addEventListener("mousemove",this.moveElement),addEventListener("mouseup",this.endMove)}moveElement(e){this.elementsMove.forEach((t=>{"mousemove"===e.type&&(e.pageX+180>window.innerWidth?(t.style.left=e.pageX-190+"px",t.classList.remove(this.alunoAtivo)):t.style.left=e.pageX+"px",e.pageY+120>window.innerHeight?(t.style.top=e.pageY-190+"px",t.classList.remove(this.alunoAtivo)):t.style.top=e.pageY+"px")}))}endMove(){removeEventListener("mousemove",this.moveElement),removeEventListener("mouseup",this.endMove),removeEventListener("mousedown",this.addEventMove)}resizeWindow(){this.endMove(),this.elementsMove.forEach((e=>{e.style.top="auto",e.style.left="auto"}))}bindEventsMove(){this.moveElement=this.moveElement.bind(this),this.endMove=this.endMove.bind(this),this.addEventMove=this.addEventMove.bind(this),this.resizeWindow=s(this.resizeWindow.bind(this),200)}init(e){return 0!=e?this.elementsMove.length&&this.containerElements.forEach((e=>{e.classList.contains(this.alunoAtivo)&&(this.bindEventsMove(),this.initMove())})):this.resizeWindow(),this}}!function e(s){const o=document.querySelector("[data-content]"),a=document.querySelector("[data-submit]");if(a&&o){if(document.getElementById("myForm").checkValidity()){s.preventDefault();const e=o.querySelectorAll("[data-treino]");e.forEach(((s,o)=>{const a=s.querySelectorAll(".option-input");var l,c;l=Array.from(a).map((t=>!!t.checked&&{dia:e[o].classList.value,treino:t.getAttribute("name").replace(/\d+/g,"")})).filter((e=>e)),c=e[o],function(e,s){const o=document.getElementById("name"),a=document.getElementById("idade"),l=document.getElementById("peso");if(e.length>=1){const c={dia:s.getAttribute("value"),treino:e},r=o.value.split(" "),d=o.value.split(" ")[0];let h,u;r.length>1?(h=o.value.split(" ")[1],u=`${d} ${h}`):u=`${d}`;const m={nome:u,idade:a.value,peso:l.value,treinosSemana:c};let v=["Segunda-Feira","Terça-Feira","Quarta-Feira","Quinta-Feira","Sexta-Feira","Sabado","Domingo"].map((e=>{if(m.treinosSemana.dia===e)return m})).reduce(((e,t)=>(e&&(n=e),t&&(i=t),[].concat(n).concat(i))));const E=v.filter((function(e,t){return v.indexOf(e)===t&&e})),p=document.getElementById("messageError"),b=document.querySelector(".registro");Object.keys(localStorage).includes(o.value)?(p.innerText="Esse usuário já existe",b.appendChild(p)):!Object.keys(localStorage).includes(o.value)&&u.trim()&&(setTimeout((()=>{localStorage.setItem(u.trim(),JSON.stringify(E))})),p.style.display="none",t.init())}}([...l].map((e=>{const t=e.treino,n=document.querySelectorAll("[data-treino]");let i="";return n.forEach((e=>{const n=e.classList.value;"segunda"!==n&&"terca"!==n&&"quarta"!==n&&"quinta"!==n&&"sexta"!==n&&"sabado"!==n&&"domingo"!==n||(i=t)})),i})),c)}))}a.addEventListener("click",e)}}(),new class{constructor(e){this.element=document.querySelectorAll(e)}addEventAccordion(){this.element.forEach((e=>{e.addEventListener("click",(()=>this.activeAccordion(e)))}))}activeAccordion(e){e.nextElementSibling.classList.toggle("ativo"),e.classList.toggle("ativo")}init(){return this.element.length&&(this.activeAccordion(this.element[0]),this.addEventAccordion()),this}}("dt").init(),new class{constructor(e,t){this.sideElement=document.querySelector(e),this.sidebarContent=document.querySelector(t),this.active="sideActive"}init(){this.sideElement&&this.sidebarContent&&this.sideElement.addEventListener("click",(()=>{this.sidebarContent.classList.add(this.active),e(this.sidebarContent,["click"],(()=>{this.sidebarContent.classList.remove(this.active)}))}))}}(".sidebar-element",".header").init(),new class{constructor(e){this.inputs=document.querySelectorAll(e),this.hasChecked="check"}init(){this.inputs.forEach((e=>{e.addEventListener("change",(()=>{e.checked?(e.classList.add(this.hasChecked),e.classList.contains(this.hasChecked)&&(e.previousElementSibling.style.background="#c7c7c7")):(e.previousElementSibling.style.background="#f0f0f0",e.classList.remove(this.hasChecked))}))}))}}(".option-input").init(),function(){const e=document.querySelector("[data-alunos]"),t=document.querySelector("[data-btn='delet']");if(e){function n(t,n){const i=document.createElement("li"),s=document.createElement("ul");s.classList.add("userContent"),t.forEach((e=>{const{dia:t,treino:n}=e.treinosSemana,{nome:o,idade:a,peso:l}=e,c=n.toString().replace(/,/g,", ");i.append(`<div> <button class="fechar" data-modal="close">X</button>  <p>${t}</p> <span>${c}</span> </div>`),s.innerHTML=`<li class="userName">${o}</li> <li>${a} anos</li> <li>${l} kg</li> <li>${i.innerText}</li> <p>Checar informações</p> <button class="btnDelet">Deletar</button>`})),e.appendChild(s)}function i(){const e=document.querySelectorAll(".userContent"),n=document.querySelectorAll(".btnDelet"),i=document.querySelector(".alunos-content");e.forEach((e=>{e.classList.toggle("delet"),e.classList.contains("delet")?e.classList.contains("delet")&&(t.innerText="Cancelar"):t.innerText="Deletar"})),n.forEach((e=>{e.addEventListener("click",(t=>{t.preventDefault();const n=e.parentElement,s=e.parentElement.querySelector(".userName").innerText;Array.from([i.children]).length&&(i.removeChild(n),localStorage.removeItem(s))}))}))}Object.keys(localStorage).forEach(((e,t)=>{const i=localStorage.getItem(e);n(JSON.parse(i))})),t.addEventListener("click",i)}}(),new class{constructor(e,t,n){this.tabContent=document.querySelectorAll(e),this.tabMenu=document.querySelectorAll(t),this.btnCloseTab=document.querySelectorAll(n)}activeTab(e){this.tabMenu.forEach((e=>e.classList.remove("alunoAtivo"))),this.tabMenu[e].classList.add("alunoAtivo"),this.moveElement=new o(".alunoAtivo",".userContent"),window.matchMedia("(min-width: 900px)").matches?(this.resizeWindow(),this.moveElement.init()):this.moveElement.init(!1)}resizeWindow(){addEventListener("resize",(()=>{window.innerWidth<900?s(this.moveElement.init(!1),200):removeEventListener("resize",this.resizeWindow)}))}addTabEvent(){this.tabMenu.forEach(((e,t)=>{e.addEventListener("click",(()=>{this.closeTab(e,t)}))}))}closeTab(e,t){this.btnCloseTab.forEach((t=>{t.addEventListener("click",(()=>{e.classList.contains("alunoAtivo")&&e.classList.add("tirar")}))})),e.classList.contains("tirar")?(e.classList.remove("alunoAtivo"),e.style.top="55%",e.style.left="80%",setTimeout((()=>{e.classList.remove("tirar")}),1)):this.activeTab(t)}bindEvents(){this.addTabEvent=this.addTabEvent.bind(this),this.activeTab=this.activeTab.bind(this),this.resizeWindow=s(this.resizeWindow.bind(this),200)}init(){return this.tabContent.length&&this.tabMenu.length&&(this.bindEvents(),this.addTabEvent()),this}}(".alunos-content",".userContent",'[data-modal="close"]').init(),new class{constructor(e,t){this.input=document.getElementById(e),this.name=document.querySelectorAll(t),this.searchName=this.searchName.bind(this)}searchName(e){this.name.forEach((t=>{const n=t.parentElement;t.innerText.includes(e.target.value)?n.style.display="grid":n.style.display="none"}))}addEventSearch(){this.input.addEventListener("keyup",this.searchName)}init(){return this.input&&this.name.length&&this.addEventSearch(),this}}("student",".userName").init(),new class{constructor(e,t){this.button=document.querySelector(e),this.content=document.querySelector(t),this.p=document.createElement("p")}addEvent(){this.p.innerText="Removido com sucesso",this.p.classList.add("msgRemove"),this.button.addEventListener("click",(()=>{localStorage.clear(),this.addAndRemoveMsg()}))}addAndRemoveMsg(){this.content.appendChild(this.p),setTimeout((()=>{this.p.style.display="none"}),1e3)}init(){return this.button&&this.content&&this.addEvent(),this}}("[data-remove]",".configuracao").init()})();